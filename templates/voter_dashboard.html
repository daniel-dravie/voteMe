{% extends "base.html" %}
{% set show_navbar = false %}

{% block title %}Voting Dashboard{% endblock %}

{% block content %}
<h2>Welcome to the Voting Platform</h2>

<form method="POST" action="{{ url_for('submit_vote') }}">
    {% for portfolio in portfolios %}
        <div class="portfolio-section">
            <h3>{{ portfolio.name }}</h3>
            {% for candidate in portfolio.candidates if not candidate.is_deleted %}
                <div class="candidate-option">
                    <input type="radio" 
                           id="candidate_{{ candidate.id }}" 
                           name="portfolio_{{ portfolio.id }}" 
                           value="{{ candidate.id }}" 
                           required>
                    <label for="candidate_{{ candidate.id }}">
                        <div class="candidate-row">
                            <div class="candidate-thumb">
                                {% if candidate.photo %}
                                <img src="{{ url_for('static', filename='uploads/' ~ candidate.photo) }}" alt="{{ candidate.user.name }}">
                                {% else %}
                                <div class="candidate-thumb placeholder">No Photo</div>
                                {% endif %}
                            </div>
                            <div class="candidate-meta">
                                <div class="candidate-name">{{ candidate.user.name if candidate.user else 'N/A' }}</div>
                                <div class="candidate-class">{{ candidate.classroom.name if candidate.classroom else 'N/A' }}</div>
                            </div>
                        </div>
                    </label>
                </div>
            {% endfor %}
        </div>
        <hr>
    {% endfor %}
    <button type="submit">Submit Vote</button>
</form>
{% endblock %}